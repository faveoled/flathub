app-id: io.github.YouROK.TorrServer
runtime: org.freedesktop.Platform
runtime-version: '23.08'
sdk: org.freedesktop.Sdk
command: run.sh
finish-args:
  - --share=network
modules:
  - name: TorrServer
    buildsystem: simple
    build-commands:
      - install -Dm755 TorrServer /app/bin/TorrServer
      - install -Dm644 io.github.YouROK.TorrServer.appdata.xml /app/share/metainfo/io.github.YouROK.TorrServer.metainfo.xml
      - install -Dm644 io.github.YouROK.TorrServer.png /app/share/icons/hicolor/512x512/apps/io.github.YouROK.TorrServer.png
      - install -Dm644 io.github.YouROK.TorrServer.desktop /app/share/applications/io.github.YouROK.TorrServer.desktop
      - install -Dm755 run.sh /app/bin/run.sh

    sources:
      - type: file
        url: https://github.com/YouROK/TorrServer/releases/download/MatriX.128/TorrServer-linux-amd64
        dest-filename: TorrServer
        sha256: af3a93bbc8d1f287f4269c896d846025e96ae16a0c306f14aa48ca443b0bf03d

      - type: file
        path: ./io.github.YouROK.TorrServer.appdata.xml

      - type: file
        path: ./io.github.YouROK.TorrServer.desktop

      - type: file
        url: https://github.com/YouROK/TorrServer/blob/37438744c6da49c355da528c054ae0c9210ade29/web/public/logo.png?raw=true
        sha256: 4b80d492d15670b76d6a1e49fcdec9801c873fbf6e76e17a5d69eafb2009584e
        dest-filename: io.github.YouROK.TorrServer.png
        
      - type: script
        commands:
          - TorrServer --path $XDG_DATA_HOME "$@"
        dest-filename: run.sh

